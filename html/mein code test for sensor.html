<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EV3 · Sensor-only check (colour 1, US 2, touch 3, gyro 4)</title>

  <!-- Use your external stylesheet (same look as before) -->
  <link rel="stylesheet" href="../css/01_mainEV.css">
</head>
<body>
  <div class="hero">
    <h1>LEGO EV3 — Sensoe-only Function Check</h1>
  </div>

  <a class="btn btn--back" href="01_main.html">← Back to overview</a>

  <main>
    <h2>Test sensor only (colour 1, US 2, touch 3, gyro 4)</h2>
    <div class="card">
<textarea id="code" spellcheck="false">#!/usr/bin/env pybricks-micropython
from pybricks.hubs import EV3Brick
from pybricks.ev3devices import ColorSensor, UltrasonicSensor, TouchSensor, GyroSensor
from pybricks.parameters import Port, Color
from pybricks.tools import wait

brick = EV3Brick()

# Start: langer grüner Blink
brick.light.on(Color.GREEN); wait(5000); brick.light.off()
wait(3000)

# --- S1: ColorSensor (Licht/reflection 0..100) ---
try:
    col = ColorSensor(Port.S1)
    v = col.reflection()            # Prozent 0..100
    if 0 <= v <= 100:
        brick.light.on(Color.GREEN); wait(500); brick.light.off()
    else:
        brick.light.on(Color.RED);   wait(1500); brick.light.off()
except Exception:
    brick.light.on(Color.RED);       wait(1500); brick.light.off()

# kleine Pause zwischen Tests
wait(5000)

# --- S2: Ultrasonic (distance in mm, typ. 20..2500) ---
try:
    us = UltrasonicSensor(Port.S2)
    d = us.distance()                # Millimeter (kann None sein, wenn nichts gesehen)
    if (d is not None) and (20 <= d <= 3000):
        brick.light.on(Color.GREEN); wait(500); brick.light.off()
    else:
        brick.light.on(Color.RED);   wait(1500); brick.light.off()
except Exception:
    brick.light.on(Color.RED);       wait(1500); brick.light.off()

wait(5000)

# --- S3: Touch (pressed() -> True/False) ---
try:
    ts = TouchSensor(Port.S3)
    p = ts.pressed()                 # bool
    # Egal ob gedrückt oder nicht: wenn wir *lesen* können, ist er angeschlossen.
    if isinstance(p, bool):
        brick.light.on(Color.GREEN); wait(500); brick.light.off()
    else:
        brick.light.on(Color.RED);   wait(1500); brick.light.off()
except Exception:
    brick.light.on(Color.RED);       wait(1500); brick.light.off()

wait(5000)

# --- S4: Gyro (angle/speed lesbar) ---
try:
    gy = GyroSensor(Port.S4)
    wait(300)                        # kurze Ruhe zum Initialisieren
    a = gy.angle()
    s = gy.speed()
    # Wenn Werte lesbar sind (ints), werten wir das als OK
    if isinstance(a, int) and isinstance(s, int):
        brick.light.on(Color.GREEN); wait(500); brick.light.off()
    else:
        brick.light.on(Color.RED);   wait(1500); brick.light.off()
except Exception:
    brick.light.on(Color.RED);       wait(1500); brick.light.off()

# Ende: kurzer grüner Blink
wait(2000)
brick.light.on(Color.ORANGE); wait(5000); brick.light.off()





</textarea>

      <div class="actions">
        <button id="download" class="btn">Download as main.py</button>
        <span class="small">Pybricks firmware on the EV3 is required.</span>
      </div>
    </div>
  </main>

  <script>
    // JS: grabs the text from the editor and saves it as "main.py".
    document.getElementById('download').addEventListener('click', function () {
      var src = document.getElementById('code').value;
      var blob = new Blob([src], {type:'text/x-python'});
      var url  = URL.createObjectURL(blob);
      var a    = document.createElement('a');
      a.href = url; a.download = 'main.py'; a.click();
      setTimeout(function(){ URL.revokeObjectURL(url); }, 0);
    });
  </script>
</body>
</html>
